<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juan Isaula">
<meta name="dcterms.date" content="2023-02-08">

<title>Blog-Isaula - Portfolio management</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Blog-Isaula</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">Perfil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../documentos.html">
 <span class="menu-text">Cursos</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/J-Isaula"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/isaula_juan"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#diversificación" id="toc-diversificación" class="nav-link active" data-scroll-target="#diversificación">Diversificación</a></li>
  <li><a href="#teoría-moderna-del-portafolio" id="toc-teoría-moderna-del-portafolio" class="nav-link" data-scroll-target="#teoría-moderna-del-portafolio">Teoría Moderna del Portafolio</a></li>
  <li><a href="#incluir-una-inversión-sin-riesgo" id="toc-incluir-una-inversión-sin-riesgo" class="nav-link" data-scroll-target="#incluir-una-inversión-sin-riesgo">Incluir una inversión sin riesgo</a>
  <ul class="collapse">
  <li><a href="#donde-quiero-estar-en-la-frontera-eficiente" id="toc-donde-quiero-estar-en-la-frontera-eficiente" class="nav-link" data-scroll-target="#donde-quiero-estar-en-la-frontera-eficiente">Donde quiero estar en la frontera eficiente?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Portfolio management</h1>
<p class="subtitle lead">Generalidades</p>
  <div class="quarto-categories">
    <div class="quarto-category">Diversificación</div>
    <div class="quarto-category">Portafolio</div>
    <div class="quarto-category">Volatilidad</div>
    <div class="quarto-category">Frontera eficiente</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Juan Isaula </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 8, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<table class="table">
<tbody>
<tr class="odd">
<td></td>
</tr>
</tbody>
</table>
<p>La teoría de la fijación de precios de derivados es una teoría de rendimientos deterministas: cubrimos nuestros derivados con el subyacente para eliminar el riesgo, y nuestra cartera libre de riesgo resultante gana la tasa de interés libre de riesgo. Los bancos ganan dinero con este proceso de cobertura; venden algo por un poco más de lo que vale y cubrir el riesgo para obtener una ganancia garantizada. Los gestores de fondos compran y venden activos (incluidos los derivados) con el objetivo de superar la tasa de rendimiento del banco. Al hacerlo, se arriesgan. En este artículo explico algunas de la teorías detrás del riesgo y la recompensa de la inversión y, como optimizar una cartera para obtener el mejor valor por dinero.</p>
<section id="diversificación" class="level2">
<h2 class="anchored" data-anchor-id="diversificación">Diversificación</h2>
<p>Introduciremos algo de notación y muestro el efecto de la diversificación sobre la rentabilidad de la cartera. Supongamos que tenemos una cartera de <span class="math inline">\(N\)</span> activos. El valor hoy del i-ésimo activo es <span class="math inline">\(S_i\)</span> y su rendimiento aleatorio es <span class="math inline">\(R_i\)</span> sobre nuestro horizonte de tiempo <span class="math inline">\(T\)</span>. Las <span class="math inline">\(R_i \sim N(\mu_iT, \sigma_i\sqrt{T})\)</span>. La correlación entre los rendimientos de la i-ésima y j-ésimo activo es <span class="math inline">\(\rho_{ij}\)</span> (con <span class="math inline">\(\rho_{ii} = 1\)</span>).</p>
<p>Los parámetros <span class="math inline">\(\mu, \sigma\)</span> y <span class="math inline">\(\rho\)</span> corresponden a la media, volatilidad y correlación a la que estamos acostumbrados. Tenga en cuenta la escala con el horizonte de tiempo.</p>
<p>Si tenemos <span class="math inline">\(w_i\)</span> del i-ésimo activo, entonces nuestra cartera tiene valor</p>
<p><span class="math display">\[
\Pi = \sum_{i=1}^{N} w_iS_i
\]</span></p>
<p>Al final de nuestro horizonte temporal, el valor es</p>
<p><span class="math display">\[\Pi + \delta\Pi = \sum_{i=1}^{N} w_iS_i(1+R_i)\]</span></p>
<p>Podemos escribir el cambio relativo en el valor de la cartera como</p>
<p><span class="math display">\[
\frac{\delta\Pi}{\Pi} = \sum_{i=1}^N W_iR_i\hspace{1.5cm} (1)
\]</span></p>
<p>donde</p>
<p><span class="math display">\[
W_i = \frac{w_iS_i}{\sum_{i=1}^N w_iS_i}
\]</span></p>
<p>Los pesos <span class="math inline">\(W_i\)</span> suman uno.</p>
<p>A partir de (1) es sencillo calcular el rendimiento esperado de la cartera</p>
<p><span class="math display">\[
\mu_{\Pi} = \frac{1}{T}E\left[\begin{array}{c}\frac{\delta\Pi}{\Pi}\end{array}\right] = \sum_{i=1}^{N}W_i \mu_i\hspace{6cm} (2)
\]</span></p>
<p>Y la desviación estándar de los retornos son</p>
<p><span class="math display">\[
\sigma_{\Pi} = \frac{1}{\sqrt{T}}\sqrt{var\left[\begin{array}{0} \frac{\delta \Pi}{\Pi}\end{array}\right]} = \sqrt{\sum_{i=1}^{N}\sum_{j=1}^N W_iW_j \rho_{ij}\sigma_i\sigma_j}\hspace{1.5cm} (3)
\]</span></p>
<p>En ellos hemos relacionado los parámetros de los activos individuales con la rentabilidad esperada y la desviación estándar de toda la cartera.</p>
<p>Supongamos que tenemos activos en nuestra cartera que no están correlacionados, es decir, <span class="math inline">\(\rho_{ij} = 0\)</span>, <span class="math inline">\(i = j\)</span>. Para simplificar las cosas, suponga que tienen el mismo peso, de modo que <span class="math inline">\(W_i = \frac{1}{N}\)</span>. El rendimiento esperado de la cartera está representado por</p>
<p><span class="math display">\[
\mu_{\Pi} = \frac{1}{N}\sum_{i=1}^N \mu_i
\]</span></p>
<p>El promedio de los rendimientos esperados de todos los activos, y la volatilidad se convierte en</p>
<p><span class="math display">\[
\sigma_{\Pi} = \sqrt{\frac{1}{N^2}\sum_{i=1}^N \sigma_i^2}
\]</span></p>
<p>Esta volatilidad es <span class="math inline">\(O(N^{-1/2})\)</span> ya que hay <span class="math inline">\(N\)</span> términos en la suma. A medida que aumentamos el número de activos en cartera, la desviación estándar de los rendimientos tiende a cero.</p>
<p>Supongamos que todos los activos no están correlacionados, pero veremos algo similar cuando describa el Modelo de fijación de precios de activos de capital; la diversificación reduce la volatilidad sin perjudicar las expectativas de rendimientos.</p>
<p>Ahora me voy a referir a la volatilidad o desviación estándar como riesgo, algo malo que debe evitarse (dentro de lo razonable), y el rendimiento esperado como recompensa, algo bueno que queremos tanto como sea posible.</p>
</section>
<section id="teoría-moderna-del-portafolio" class="level2">
<h2 class="anchored" data-anchor-id="teoría-moderna-del-portafolio">Teoría Moderna del Portafolio</h2>
<p>Pödemos usar el marco anterior para discutir la <em>“mejor”</em> cartera. La definición de <em>“mejor”</em> fue abordada con mucho éxito por el Premio Nobel Harry Markowitz. Su modelo proporciona una manera de definir carteras que sean <code>eficientes</code>.</p>
<p>Una cartera eficiente es aquella que tiene la recompensa más alta para un nivel de riesgo, o el riesgo más bajo para una recompensa dada. Para ver cómo funciona esto imagina que hay cuatro activos en el mundo <span class="math inline">\(A, B, C\)</span> y <span class="math inline">\(D\)</span> con recompensa y riesgo como se muestra en la figura 1 (ignore E por el momento). Si pudieras comprar alguno de estos (pero de momentos no te permiten más de uno), ¿cuál comprarías? eliges D? No, porque tiene el mismo riesgo que B pero menos recompensa, tiene la misma recompensa que como C pero pun mayor riesgo. Entonces, podemos descartar <span class="math inline">\(D\)</span>. ¿Qué pasa con B o C? Ambos son atractivos cuando se comparan con D, pero entre si no estan claro, B tiene un mayor riesgo, pero obtiene una mayor recompensa. Sin embargo, comparándolos a ambos con A vemos que no hay competencia, ya que A es la elección preferida. Si introducimos el activo E con el mismo riesgo que B y una recompensa mayor que A, entonces no podemos decir objetivamente cuál de A y E es mejor; esta es una elección subjetiva y depende de las <code>preferencias de riesgo</code> de un inversor.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="im1.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura 1: Riesgo y recompensa de cinco activos</figcaption><p></p>
</figure>
</div>
<p>Ahora suponga que tengo los dos activos A y E de la figura 2, y puedo combinar en mi cartera, ¿qué efecto tiene esto en mi riesgo/recompensa?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="im2.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura 2: Dos activos y cualquier combinación</figcaption><p></p>
</figure>
</div>
<p>De (2) y (3) tenemos</p>
<p><span class="math display">\[\mu_{\Pi} = W\mu_{A} + (1-W)\mu_{E}\]</span></p>
<p>y</p>
<p><span class="math display">\[
\sigma_{\Pi}^2 = W^2\sigma_{A}^2 + 2W(1-W)\rho\sigma_{A}\sigma_{E} + (1-W)^2\sigma_{E}^2
\]</span></p>
<p>Aquí <span class="math inline">\(w\)</span> es el peso del activo A y, recordando que los pesos deben sumar uno, el peso del activo E es <span class="math inline">\(1 - E\)</span>.</p>
<p>A medida que variamos W, también cambian el riesgo y la recompensa. La linea en el espacio de riesgo/recompensa que es parametrizada por W es una hipérbola, como se muestra en la figura 2. La parte de esta curva en negrita es eficiente, y es preferible al resto de la curva. Una ves más, las preferencias de riesgo de un individuo dirá dónde quiere estar en la curva audaz. Cuando una de las volatilidades es cero la línea se vuelvve recta. en cualquier lugar de la curva entre los dos puntos se requiere una posición larga en cada activo. Fuera de esta región, uno de los activos se vende al descubierto para financiar la compra del otro. Todo lo que sigue asume que podemos vender al descubierto tanto activo como queramos. Los resultados cambian ligeramente cuando hay restricciones.</p>
<p>Si tenemos muchos activos en nuestra cartera, ya no tenemos una simple hipérbola para nuestros posibles perfiles de riesgo/recompensa; en cambio obtenemos algo como lo que se muestra en la Figura 3.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="im3.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura 3: Posibilidades de cartera y la frontera eficiente</figcaption><p></p>
</figure>
</div>
<p>Esta figura ahora usa todo A, B, C, D y E, no solo A y E. Aunque B, C y D no son individualmente atractivos, bien pueden ser útiles en un portafolio, dependiendo de como se correlacionen, o no, con otras inversiones. En esta figura podemos ver la <code>frontera eficiente</code> marcada en negrita. Dado cualquier elección de cartera elegiríamos tener una que se encuentre en esta frontera eficiente.</p>
</section>
<section id="incluir-una-inversión-sin-riesgo" class="level2">
<h2 class="anchored" data-anchor-id="incluir-una-inversión-sin-riesgo">Incluir una inversión sin riesgo</h2>
<p>Una inversión sin riesgo que gana una tasa de rendimiento garantizada <span class="math inline">\(r\)</span> sería el punto F en la Figura 3. Si se nos permite mantener este activo en nuestra cartera, dado que la volatilidad de este activo es cero, obtenemos la nueva frontera eficiente que es la línea recta en la Figura 3. El portafolio para el que la línea recta toca la frontera eficiente original se denomina <code>cartera de mercado</code>. La linea recta en sí misma se llama la <code>línea del mercado de capitales</code>.</p>
<section id="donde-quiero-estar-en-la-frontera-eficiente" class="level3">
<h3 class="anchored" data-anchor-id="donde-quiero-estar-en-la-frontera-eficiente">Donde quiero estar en la frontera eficiente?</h3>
<p>Habiendo encontrado la frontera eficiente, queremos aber dónde debemos estar. Esta es una elección personal, la frontera eficiente es objetiva, dados los datos, pero la <em>“mejor”</em> posición en ella es subjetiva.</p>
<p>La siguiente es una forma de interpretar el diagrama de riesgo/recompensa que puede ser útil en la elección de la mejor cartera.</p>
<p>El rendimiento de la cartera se distribuye normalmente porque está compuesto por activos que se distribuyen normalmente. Tiene media <span class="math inline">\(\mu\)</span> y desviación estándar <span class="math inline">\(\sigma\)</span> (he ignorado la dependencia del horizonte T). La pendiente de la línea que une la cartera con el activo libre de riesgo es</p>
<p><span class="math display">\[
s = \frac{\mu_{\Pi} - r}{\sigma_{\Pi}}
\]</span></p>
<p>Esta es una cantidad importante; es una medida de la probabilidad de tenter un rendimiento que exceda r. Si <span class="math inline">\(C(.)\)</span> es la función acumulada para la distribución normal estandarizada, entonces <span class="math inline">\(C(s)\)</span> es la probabilidad de que el rendimiento en <span class="math inline">\(\Pi\)</span> sea al menos q <span class="math inline">\(r\)</span>. Mas generalmente</p>
<p><span class="math display">\[
C\left(\begin{array}{0}\frac{\mu_{\Pi} - r^*}{\sigma_{\Pi}}\end{array}\right)
\]</span></p>
<p>es la probabilidad de que el rendimiento exceda <span class="math inline">\(r^*\)</span>. Esto sugiere que si queremos minimizar la posibilidad de una rentabilidad inferior a <span class="math inline">\(r^*\)</span> debemos elegir la cartera del conjunto de fronteras eficientes, <span class="math inline">\(\Pi_{eff}\)</span> con el mayor valor de la pendiente</p>
<p><span class="math display">\[
\frac{\mu_{\Pi_{eff}} - r^*}{\sigma_{\Pi_{eff}}}
\]</span></p>
<p>Por el contrario, si mantenemos la pendiente de esta línea fija en <span class="math inline">\(s\)</span>, entonces podemos decir que con una confianza de <span class="math inline">\(C(s)\)</span> no perderemos más que</p>
<p><span class="math display">\[
\mu_{\Pi_{eff}} - s\sigma_{\Pi_{eff}}
\]</span></p>
<p>Nuestra elección de cartera podría determinarse maximizando esta cantidad. Estas dos estrategías se muestran esquemáticamente en la Figura 5.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="im4.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura 5: Dos sencillas formas de elegir la mejor cartera eficiente</figcaption><p></p>
</figure>
</div>
<p>Ninguno de estos métodos da resultados satisfactorios cuando existe inversión libre de riesgo entre los activos y hay ventas cortas sin restricciones, ya que dan como resultado un endeudamiento infinito.</p>
<p>Otra forma de elegir la cartera óptima es con la ayuda de una <code>función de utilidad.</code> Este enfoque es popular entre los economistas. En la Figura 6 muestro las <code>curvas de indiferencia</code> y la frontera eficiente.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="im5.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura 6: Frontera eficiente y las curvas de indiferencia</figcaption><p></p>
</figure>
</div>
<p>Las curvas reciben este nombre porque representan lineas a las cual el inversionista es indiferente al trade-off riesgo/recompensa. Un inversionista quiere un alto rendimiento y riesgo bajo. Frente a las carteras A y B en la Figura, ve a A con bajo rendimiento y bajo riesgo, pero B tiene una mejor recompensa a costa de un mayor riesgo. El inversor es indiferente entre estos dos. Sin embargo, C es mejor que ambos, estando en una curva preferida.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="Isaula/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>